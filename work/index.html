<!doctype html>
<html lang="pl">
<head>
  <link rel="canonical" href="https://malepszym.github.io/">
  <meta name="description" content="Martyna Malepszy — styling, communications lead, production.">

  <meta property="og:type" content="website">
  <meta property="og:title" content="malepszym — portfolio">
  <meta property="og:description" content="Styling, communications lead, production.">
  <meta property="og:url" content="https://malepszym.github.io/">
 <meta property="og:image" content="https://malepszym.github.io/assets/og-home-v2.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:image" content="https://malepszym.github.io/assets/og-home-v2.jpg">


  <meta name="twitter:card" content="summary_large_image">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <meta name="theme-color" content="#eeeeee">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Work — malepszym</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
  :root{
    --bg:#eee; --fg:#111; --muted:#bfbfbf;
    --maxw:1200px; --gap:28px;
    --underline:3px; --offset:6px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family:Inter,system-ui,Arial,sans-serif;
    min-height:100vh; display:flex; flex-direction:column; line-height:1.6;
  }
  .container{max-width:var(--maxw); margin:0 auto; padding:clamp(16px,3vw,32px); width:100%}

  /* top bar */
  .top{display:flex; align-items:center; justify-content:space-between}
  .back{display:inline-flex; align-items:center; gap:12px; text-decoration:none; color:inherit;
    font-family:"Archivo Black",system-ui,sans-serif; font-size:22px}
  .arrow{font-size:28px; line-height:1; transform:translateY(-1px)}
  .section-label{color:var(--muted); font-weight:700; text-transform:lowercase}

  /* === STUCK: ta sama strzałka przypięta względem .container === */
  .back.stuck{
    position: fixed;
    /* lewa krawędź kontenera + jego padding */
    left: calc( max((100vw - var(--maxw)) / 2, 0px) + clamp(16px, 3vw, 32px) );
    /* ta sama wysokość co padding kontenera */
    top:  clamp(16px, 3vw, 32px);
    z-index: 45; /* lightbox ma 50; zmień na 55, jeśli chcesz nad lightboxem */
    display: grid; place-items: center;
    width: 36px; height: 36px;         /* ← rozmiar kwadratu */
    background: var(--bg); color: var(--fg);
    border: 1px solid #e5e5e5; border-radius: 10px;
    box-shadow: 0 8px 16px rgba(0,0,0,.08);
    padding: 0; gap: 0;
  }
  /* ukryj wizualnie napis "malepszym" w trybie stuck (A11y zostaje) */
  .back.stuck span:nth-of-type(2){
    position:absolute !important; width:1px; height:1px; overflow:hidden; white-space:nowrap;
    clip:rect(0 0 0 0); clip-path:inset(50%);
  }
  /* strzałka zostaje jak była */
  .back.stuck .arrow{ font-size:24px; transform:none }
  @media (max-width:700px){
    .back.stuck{ width:36px; height:36px }
    .back.stuck .arrow{ font-size:22px }
  }

  /* page title – bazowe odstępy (nieciasno globalnie) */
  .page-title{
    font-family:"Archivo Black",system-ui,sans-serif;
    text-align:center; font-size:clamp(44px,10vw,120px);
    line-height:1.05; margin: clamp(24px,6vh,48px) 0;
    letter-spacing:1px;
  }

  /* gallery */
  .gallery{
    display:grid; gap:var(--gap);
    grid-template-columns:repeat(3,1fr);
    align-items:stretch;
  }

  /* clickable tiles (no default button chrome) */
  .frame{
    appearance:none; -webkit-appearance:none;
    border:0; padding:0; margin:0;
    background:transparent; line-height:0; cursor:pointer; display:block;
    position:relative; overflow:hidden; /* dla overlayu */
    /* Jeśli wszystkie 3 miniatury mają ten sam kadr, możesz włączyć stały stosunek: */
    /* aspect-ratio: 3 / 4; */
  }
  .frame img{
    display:block; width:100%; height:100%; object-fit:cover;
    transition:filter .25s ease;
  }
  .frame:hover img{ filter:grayscale(100%) contrast(.95) brightness(.98) }
  .frame:focus-visible{ outline:3px solid #000; outline-offset:6px; border-radius:6px }

  /* meta pod galerią */
  .project-meta{ text-align:center; margin:clamp(24px,6vh,48px) 0 }
  .project-title{
    font-family:"Archivo Black",system-ui,sans-serif;
    font-size:clamp(36px,6.5vw,72px); line-height:1.08; margin:0 0 6px;
  }
  .project-roles{
    font-family:"Archivo Black",system-ui,sans-serif;
    font-size:clamp(18px,3vw,28px); margin:0;
  }

   /* link "more" pod rolą — na środku, ciemnoszary i trochę większy */
.project-meta a.project-more{
  display:inline-block;
  margin-top:8px;
  font-family:"Archivo Black",system-ui,sans-serif;
  font-size: clamp(15px, 1.4vw, 17px);
  color:#6d6d6d;                 /* ciemnoszary */
  text-transform:lowercase;
  letter-spacing:.3px;
  text-decoration:none;          /* underline robi .link-underline */
}
.project-meta a.project-more:hover{ filter:brightness(1.06); }
    
  /* underline dla linków w tytułach */
  .link-underline{ position:relative; text-decoration:none; color:inherit }
  .link-underline::after{
    content:""; position:absolute; left:0; bottom:calc(var(--offset)*-1);
    height:var(--underline); width:0; background:currentColor; transition:width .25s ease;
  }
  .link-underline:hover::after{ width:100% }

  /* odstęp między projektami */
  .project-block{ margin-top: clamp(40px, 10vh, 80px); }

  /* responsywny YouTube 16:9 */
  .video-wrap{
    position:relative; width:100%; aspect-ratio:16/9;
    background:#000; border-radius:8px; overflow:hidden;
  }
  .video-wrap iframe{
    position:absolute; inset:0; width:100%; height:100%; border:0;
  }

  /* RWD */
  @media (max-width:1000px){ .gallery{ grid-template-columns:repeat(2,1fr) } }
  @media (max-width:640px){ .gallery{ grid-template-columns:1fr } }

  /* LIGHTBOX (modal) */
  .lightbox{
    position:fixed; inset:0; z-index:50;
    display:none; align-items:center; justify-content:center; gap:8px;
    background:rgba(0,0,0,.75); padding:24px;
  }
  .lightbox.open{ display:flex }
  .lb-track{
    position:relative; width:min(1200px, 96vw); height:min(86vh, 900px);
    overflow-x:auto; scroll-snap-type:x mandatory; display:flex; gap:0; background:#111;
  }
  .lb-track img{
    flex:0 0 100%; height:100%; object-fit:contain; scroll-snap-align:center; background:#111;
  }
  .lb-btn{
    appearance:none; border:0; background:rgba(255,255,255,.85); color:#111;
    width:42px; height:42px; border-radius:999px; font-size:24px; line-height:1;
    display:inline-grid; place-items:center; cursor:pointer;
  }
  .lb-btn:hover{ background:#fff }
  .lb-close{ position:absolute; top:16px; right:16px }
  .lb-prev, .lb-next{ align-self:center }
  .lb-prev{ order:-1 } .lb-next{ order:2 }
  .no-scroll{ overflow:hidden }

  /* overlay "see more" */
  .see-more{
    position:absolute; inset:0; display:grid; place-items:center;
    color:#fff; font-family:"Archivo Black",system-ui,sans-serif;
    font-size:clamp(16px,2.2vw,22px); letter-spacing:.5px;
    text-transform:lowercase;
    opacity:0; transition:opacity .25s ease; pointer-events:none;
  }
  .see-more::before{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.28) }
  .see-more span{ position:relative; z-index:1 }
  .frame.has-more:hover .see-more,
  .frame.has-more:focus-visible .see-more{ opacity:1 }

  /* Pasek miniaturek w lightboxie (desktop) */
  .lb-thumbs{
    position:absolute; left:50%; transform:translateX(-50%);
    bottom:16px;
    display:flex; gap:10px; padding:8px 10px;
    background:rgba(0,0,0,.35); border-radius:10px;
    max-width:96vw; overflow-x:auto; z-index:2;
    -webkit-overflow-scrolling: touch;
  }
  .lb-thumb{
    appearance:none; border:0; padding:0; margin:0; cursor:pointer;
    width:clamp(44px, 6vw, 72px); height:clamp(44px, 6vw, 72px);
    border-radius:6px; overflow:hidden; opacity:.6; outline:2px solid transparent;
    flex:0 0 auto; background:#000;
  }
  .lb-thumb img{ width:100%; height:100%; object-fit:cover; display:block }
  .lb-thumb.active{ opacity:1; outline-color:#fff }
  @media (max-width: 900px){ .lb-thumbs{ display:none } }

  /* ===== Scroll reveal ===== */
  .reveal{
    opacity:0; transform:translateY(16px);
    transition:opacity .6s ease, transform .6s ease; will-change:opacity,transform;
  }
  .reveal.in{ opacity:1; transform:none }
  .from-left{ transform:translateX(-24px) }
  .from-right{ transform:translateX(24px) }
  .from-bottom{ transform:translateY(16px) }
  .reveal.in.from-left,.reveal.in.from-right,.reveal.in.from-bottom{ transform:none }
  .delay-1{ transition-delay:.10s }
  .delay-2{ transition-delay:.22s }
  .delay-3{ transition-delay:.34s }
  .delay-4{ transition-delay:.46s }
  @media (prefers-reduced-motion:reduce){ .reveal{ opacity:1; transform:none; transition:none } }

  /* footer */
  footer{ margin-top:auto; border-top:1px solid #e5e5e5 }
  footer .container{ color:#9aa0a6; font-size:14px }

  /* --- MOBILE LIGHTBOX FIX --- */
  @media (max-width: 768px){
    .lightbox{ padding: 8px !important; }
    .lb-btn{ width:36px; height:36px; font-size:20px }
    .lb-close{ top:8px; right:8px }
    .lightbox .lb-track{
      width: 100vw;
      height: 70vh !important;
      height: 70svh !important;
      height: 70dvh !important;
    }
    .lightbox .lb-track img{ width:100%; height:100%; object-fit:contain }
  }
  @media (max-width: 380px){
    .lightbox .lb-track{
      height: 66vh !important;
      height: 66svh !important;
      height: 66dvh !important;
    }
  }

  /* Back to top */
  .to-top{
    position: fixed;
    right: clamp(12px, 3vw, 24px);
    bottom: clamp(12px, 3vw, 24px);
    width: 48px; height: 48px;
    border: 0; border-radius: 999px;
    display: grid; place-items: center;
    background: var(--fg); color: var(--bg);
    font-family: "Archivo Black", system-ui, sans-serif;
    font-size: 22px; line-height: 1;
    box-shadow: 0 8px 18px rgba(0,0,0,.15);
    opacity: 0; transform: translateY(12px);
    pointer-events: none; transition: opacity .25s ease, transform .25s ease;
    z-index: 45; /* lightbox ma 50 */
  }
  .to-top.show{ opacity:1; transform:none; pointer-events:auto }
  .to-top:hover{ filter:brightness(1.05) }
  .to-top:focus-visible{ outline:3px solid #000; outline-offset:3px }
  @media (max-width:640px){ .to-top{ width:56px; height:56px; font-size:24px } }

  /* ===== PRELOADER „mm” ===== */
#preloader{
  position: fixed; inset: 0; z-index: 9999;
  display: grid; place-items: center;
  background: var(--bg); color: var(--fg);
  transition: opacity .4s ease, visibility .4s ease;
}
#preloader.hidden{ opacity: 0; visibility: hidden }
    /* rozmiar logo w preloaderze */
#preloader svg{
  width: clamp(120px, 26vw, 260px);
  height: auto;
  display: block;
}

/* litera "mm" – stan bazowy (bez animacji) */
#preloader .mm{
  font-family: "Archivo Black", system-ui, sans-serif;
  font-size: 180px;            /* skaluje się przez viewBox */
  fill: transparent;           /* na start tylko kontur */
  stroke: currentColor; stroke-width: 10; stroke-linejoin: round;
  paint-order: stroke fill;
  stroke-dasharray: 1400;
  stroke-dashoffset: 1400;
}

/* gdy ma klasę .loop – gra cyklem w kółko */
#preloader .mm.loop{
  animation: mm-seq 2.2s ease-in-out infinite;
}

/* gdy ma klasę .finalize – szybko dorysuj i wypełnij */
#preloader .mm.finalize{
  animation: mm-fill-final .35s ease-out forwards;
}

/* cykl pętli: rysuj kontur → wypełnij → wyczyść → od nowa */
@keyframes mm-seq{
  0%   { stroke-dashoffset: 1400; fill: transparent; }
  40%  { stroke-dashoffset: 0;    fill: transparent; }
  58%  { fill: currentColor; }
  72%  { fill: currentColor; }    /* chwila pauzy wypełnione */
  90%  { fill: transparent; }
  100% { stroke-dashoffset: 1400; fill: transparent; }
}

/* jednorazowe domknięcie przy chowaniu */
@keyframes mm-fill-final{
  to { stroke-dashoffset: 0; fill: currentColor; }
}

/* Szacunek dla prefers-reduced-motion: bez pętli, po prostu pokaż pełne */
@media (prefers-reduced-motion: reduce){
  #preloader .mm{ stroke-dashoffset: 0; fill: currentColor; }
  #preloader .mm.loop{ animation: none; }
  #preloader .mm.finalize{ animation: none; }
}


  /* ===== Project credits (infinite sliding) ===== */
  .credits{
    position:relative; overflow:hidden;
    margin: clamp(6px, 2.5vh, 20px) 0 0;
  }
  .credits::before,.credits::after{
    content:""; position:absolute; top:0; bottom:0; width:64px; pointer-events:none;
  }
  .credits::before{ left:0;  background:linear-gradient(to right, var(--bg), transparent); }
  .credits::after { right:0; background:linear-gradient(to left,  var(--bg), transparent); }

  .credits-track{
    display:flex; width:max-content; gap:64px;
    animation: marquee var(--speed, 22s) linear infinite;
    will-change: transform;
  }
  .credits:hover .credits-track{ animation-play-state: paused; }

  .credits-line{
    white-space:nowrap; color:#9aa0a6; font-style:italic;
    font-size: clamp(14px, 1.8vw, 22px); letter-spacing:.2px;
  }
  @keyframes marquee{
    from{ transform: translateX(0) }
    to  { transform: translateX(-50%) }
  }
  @media (prefers-reduced-motion: reduce){
    .credits{ overflow:auto }
    .credits-track{ animation:none }
    .credits::before,.credits::after{ display:none }
  }

  /* footer layout + socials */
  footer .foot{
    display:flex; align-items:center; justify-content:space-between;
    gap:12px; flex-wrap:wrap;
  }
  footer .socials{
    display:flex; align-items:center; gap:10px;
    color:#9aa0a6; font-size:14px;
  }
  footer .socials a{ color:inherit; text-decoration:none }
  footer .socials a:hover{ text-decoration:underline }
  footer .socials .sep{ opacity:.6; user-select:none }
  @media (max-width:520px){
    footer .foot{ justify-content:center; gap:8px }
  }

  /* TYLKO DESKTOP – ciaśniej nad i pod tytułem */
  @media (min-width:701px){
    main.container{
      padding-top: clamp(10px, 2vw, 20px);
    }
    .page-title{
      margin: clamp(16px, 4.5vh, 36px) 0 clamp(12px, 3vh, 22px);
    }
  }
   /* "more" – jednakowy wygląd dla wszystkich projektów */
.project-meta a.project-more,
.project-meta a.more {                     /* alias, gdyby gdzieś zostało .more */
  display:inline-block;
  margin-top:8px;
  font-family:"Archivo Black", system-ui, sans-serif;
  font-size:clamp(15px, 1.4vw, 17px);
  color:#6d6d6d;                           /* ciemnoszary */
  text-transform:lowercase;
  letter-spacing:.3px;
  text-decoration:none;
}
.project-meta a.project-more:hover,
.project-meta a.more:hover,
.project-meta a.project-more:focus,
.project-meta a.more:focus{
  text-decoration:underline;
}

</style>
</head>
<body>
  <div id="preloader" role="status" aria-live="polite">
  <svg viewBox="0 0 600 240" width="240" height="96" aria-label="Loading">
    <text x="50%" y="58%" text-anchor="middle" class="mm">mm</text>
  </svg>
</div>

  <header class="container top">
    <a class="back" href="/" aria-label="Wróć na stronę główną"><span class="arrow">←</span><span>malepszym</span></a>
    <span class="section-label">work</span>
  </header>

  <main class="container">
    <h1 class="page-title reveal from-bottom">PROJECTS</h1>

    <!-- PROJECT 1 — Remains -->
    <div class="project-block">
      <div class="gallery">
        <button class="frame reveal from-left  delay-1" type="button" data-group="remains" data-index="0" aria-label="Otwórz galerię — zdjęcie 1">
          <img src="/assets/work/1.svg" alt="Remains — zdjęcie 1" loading="eager" fetchpriority="high" class="critical">
        </button>
        <button class="frame reveal from-bottom delay-2" type="button" data-group="remains" data-index="1" aria-label="Otwórz galerię — zdjęcie 2">
          <img src="/assets/work/2.svg" alt="Remains — zdjęcie 2" loading="eager" fetchpriority="high" class="critical">
        </button>
        <button class="frame reveal from-right delay-3" type="button" data-group="remains" data-index="2" aria-label="Otwórz galerię — zdjęcie 3">
          <img src="/assets/work/3.svg" alt="Remains — zdjęcie 3" loading="eager" fetchpriority="high" class="critical">
        </button>
      </div>
      <section class="project-meta reveal from-bottom delay-4">
        <h2 class="project-title">
          <a class="link-underline" href="https://www.instagram.com/remains.official" target="_blank" rel="noopener noreferrer">Remains</a>
        </h2>
        <p class="project-roles">styling · communications lead </p>
        <a class="project-more link-underline" href="/work/remains/">more</a>
      </section>
      <div class="credits reveal from-bottom" aria-label="Project credits">
  <div class="credits-track" style="--speed: 24s;">
    <div class="credits-line"> osama ahmed – clifford adu – zofia gizan - łukasz szywalski - adrian dudzinski - kaja mann - olga starzynska - youssef mongach - maria jakubowska - natalia kraskowska - &others </div>
    <div class="credits-line" aria-hidden="true">osama ahmed – clifford adu – zofia gizan - łukasz szywalski - adrian dudzinski - kaja mann - olga starzynska - youssef mongach - maria jakubowska - natalia kraskowska - &others</div>
  </div>
</div>

    </div>

    <!-- PROJECT 2 — kajamann.clothing -->
    <div class="project-block">
      <div class="gallery">
        <button class="frame reveal from-left  delay-1" type="button" data-group="kajamann" data-index="0" aria-label="Otwórz galerię — zdjęcie 1">
          <img src="/assets/work/4.svg" alt="kajamann.clothing — zdjęcie 1" loading="lazy">
        </button>
        <button class="frame reveal from-bottom delay-2" type="button" data-group="kajamann" data-index="1" aria-label="Otwórz galerię — zdjęcie 2">
          <img src="/assets/work/5.svg" alt="kajamann.clothing — zdjęcie 2" loading="lazy">
        </button>
        <button class="frame reveal from-right delay-3" type="button" data-group="kajamann" data-index="2" aria-label="Otwórz galerię — zdjęcie 3">
          <img src="/assets/work/6.svg" alt="kajamann.clothing — zdjęcie 3" loading="lazy">
        </button>
      </div>
      <section class="project-meta reveal from-bottom delay-4">
        <h2 class="project-title">
          <a class="link-underline" href="https://www.instagram.com/kajamann.clothing/" target="_blank" rel="noopener noreferrer">kajamann.clothing</a>
        </h2>
        <p class="project-roles">styling · creative assistant</p>
<a class="project-more link-underline" href="/kajamanclothing/" aria-label="More about kajamann.clothing">more</a>
      </section>
      <div class="credits reveal from-bottom" aria-label="Project credits">
  <div class="credits-track" style="--speed: 24s;">
    <div class="credits-line"> kaja mann - olga starzynska - zofia lebiocka - paulina nowak </div>
    <div class="credits-line" aria-hidden="true"> kaja mann - olga starzynska - zofia lebiocka - paulina nowak </div>
  </div>
</div>

    </div>

    <!-- PROJECT 3 — Tabusie (YouTube) -->
    <div class="project-block">
      <div class="video-wrap reveal from-bottom">
        <iframe
          src="https://www.youtube-nocookie.com/embed/v4vYYpS4b9Y?modestbranding=1&rel=0"
          title="Tabusie — video"
          loading="lazy"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen></iframe>
      </div>
      <section class="project-meta reveal from-bottom delay-2">
        <h2 class="project-title">
          <a class="link-underline" href="http://tabou.pl/tabusie" target="_blank" rel="noopener noreferrer">Tabusie</a>
        </h2>
        <p class="project-roles">project coordinator · production assistant</p>
      </section>
      <div class="credits reveal from-bottom" aria-label="Project credits">
  <div class="credits-track" style="--speed: 24s;">
    <div class="credits-line">filip luft – maciej magowski – ewelina janus – dominika soćko – patryk dróżdż – jakub machoj – joanna darnikiewicz – adam gmurczyk – robert senderowski – yeva tsinska – paweł rupiński – krystian kościjański – malina kościjańska – antek luft – ania luft – rafał mikulski</div>
    <div class="credits-line" aria-hidden="true">filip luft – maciej magowski – ewelina janus – dominika soćko – patryk dróżdż – jakub machoj – joanna darnikiewicz – adam gmurczyk – robert senderowski – yeva tsinska – paweł rupiński – krystian kościjański – malina kościjańska – antek luft – ania luft – rafał mikulski</div>
  </div>
</div>

    </div>
  </main>

  <!-- MODAL GALLERY -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Galeria">
    <button class="lb-btn lb-prev"  aria-label="Poprzednie">‹</button>
    <div class="lb-track" id="lbTrack" tabindex="0"></div>
    <div class="lb-thumbs" id="lbThumbs" aria-label="Miniatury"></div>
    <button class="lb-btn lb-next"  aria-label="Następne">›</button>
    <button class="lb-btn lb-close" id="lbClose" aria-label="Zamknij">×</button>
  </div>

  <footer>
  <div class="container">
    <div class="foot">
      <div>© <span id="y"></span> malepszym</div>
      <nav class="socials" aria-label="social links">
        <a href="http://instagram.com/malepszym" target="_blank" rel="noopener noreferrer">instagram</a>
        <span class="sep">/</span>
        <a href="https://www.linkedin.com/in/martyna-malepszy-616598207/" target="_blank" rel="noopener noreferrer">linkedin</a>
      </nav>
    </div>
  </div>
</footer>


  <!-- Back to top -->
  <button id="toTop" class="to-top" aria-label="Back to top" title="Back to top">↑</button>

  <script>
    // Rok w stopce
    document.getElementById('y').textContent = new Date().getFullYear();

    // Zestawy obrazów dla lightboxa
    const IMAGES = {
      remains: [
        '/assets/work/1.svg','/assets/work/2.svg','/assets/work/3.svg',
        '/assets/work/r4.svg','/assets/work/r5.svg','/assets/work/r6.svg','/assets/work/r7.svg'
      ],
      kajamann: [
        '/assets/work/4.svg','/assets/work/5.svg','/assets/work/6.svg',
        '/assets/work/km4.svg','/assets/work/km5.svg','/assets/work/km6.svg','/assets/work/km7.svg'
      ]
    };

    /* ===== Scroll reveal ===== */
    (function(){
      const els = document.querySelectorAll('.reveal');
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduce){ els.forEach(el => el.classList.add('in')); return; }
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){ entry.target.classList.add('in'); io.unobserve(entry.target); }
        });
      }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });
      els.forEach(el => io.observe(el));
    })();

    /* ===== Lightbox ===== */
    const overlay = document.getElementById('lightbox');
    const track   = document.getElementById('lbTrack');
    const btnPrev = document.querySelector('.lb-prev');
    const btnNext = document.querySelector('.lb-next');
    const btnClose= document.getElementById('lbClose');
    const thumbs  = document.getElementById('lbThumbs');

    let group = null;
    let index = 0;

    function renderTrack(list){
      track.innerHTML = '';
      if (thumbs) thumbs.innerHTML = '';
      list.forEach((src,i)=>{
        const img = document.createElement('img');
        img.src = src; img.alt = `Zdjęcie ${i+1}`;
        track.appendChild(img);
        if (thumbs){
          const th = document.createElement('button');
          th.className = 'lb-thumb';
          th.setAttribute('aria-label', `Pokaż zdjęcie ${i+1}`);
          const timg = document.createElement('img');
          timg.src = src; timg.alt = '';
          th.appendChild(timg);
          th.addEventListener('click', ()=> jumpTo(i));
          thumbs.appendChild(th);
        }
      });
    }

    function updateThumbsActive(){
      if (!thumbs) return;
      const items = thumbs.querySelectorAll('.lb-thumb');
      items.forEach((el, i)=> el.classList.toggle('active', i === index));
      const active = items[index];
      if (active){
        const center = active.offsetLeft - (thumbs.clientWidth/2 - active.clientWidth/2);
        thumbs.scrollTo({ left: Math.max(0, center), behavior: 'smooth' });
      }
    }

    function jumpTo(i){
      index = i;
      const w = track.clientWidth;
      track.scrollTo({ left: w * index, behavior: 'smooth' });
      updateThumbsActive();
    }

    function openLightbox(g, i=0){
      group = g; index = i;
      renderTrack(IMAGES[group]);
      overlay.classList.add('open');
      document.body.classList.add('no-scroll');
      requestAnimationFrame(()=>{
        const w = track.clientWidth;
        track.scrollTo({ left: w * index, behavior: 'auto' });
        track.focus({ preventScroll: true });
        updateThumbsActive();
      });
    }
    function closeLightbox(){
      overlay.classList.remove('open');
      document.body.classList.remove('no-scroll');
      group = null;
    }
    function go(delta){
  if(!group) return;
  const count = IMAGES[group].length;
  const prev = index;
  index = (index + delta + count) % count;

  const w = track.clientWidth;
  const isWrap = (prev === count - 1 && index === 0) || (prev === 0 && index === count - 1);
  track.scrollTo({ left: w * index, behavior: isWrap ? 'auto' : 'smooth' });

  updateThumbsActive();
}

    // Miniatury + overlay "see more"
    document.querySelectorAll('.frame').forEach(btn=>{
      const g = btn.dataset.group;
      const needsMore = IMAGES[g] && IMAGES[g].length > 3;

      if (needsMore) {
        btn.classList.add('has-more');
        if (!btn.querySelector('.see-more')) {
          const o = document.createElement('span');
          o.className = 'see-more'; o.setAttribute('aria-hidden','true');
          const inner = document.createElement('span');
          inner.textContent = 'see more';
          o.appendChild(inner);
          btn.appendChild(o);
        }
      }

      btn.addEventListener('click', ()=>{
        const i = parseInt(btn.dataset.index,10) || 0;
        openLightbox(g, i);
      });
    });

    // Sterowanie lightbox
    btnPrev.addEventListener('click', ()=>go(-1));
    btnNext.addEventListener('click', ()=>go(1));
    btnClose.addEventListener('click', closeLightbox);
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeLightbox(); });
   window.addEventListener('keydown', (e)=>{
  if(!overlay.classList.contains('open')) return;
  if(e.key === 'Escape'){ e.preventDefault(); closeLightbox(); return; }
  if(e.key === 'ArrowRight'){ e.preventDefault(); go(1); }
  if(e.key === 'ArrowLeft'){  e.preventDefault(); go(-1); }
});

    // Aktualizacja indexu przy ręcznym scrollu
    let timer;
    track.addEventListener('scroll', ()=>{
      clearTimeout(timer);
      timer = setTimeout(()=>{
        const w = track.clientWidth;
        index = Math.round(track.scrollLeft / w);
        updateThumbsActive();
      }, 80);
    });

    /* Back to top */
    (function(){
      const btn = document.getElementById('toTop');
      if (!btn) return;
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      let lastY = window.scrollY;
      function onScroll(){
        const y = window.scrollY;
        const downFar = y > 600;
        const scrollingUp = y < lastY - 10;
        btn.classList.toggle('show', downFar || scrollingUp);
        lastY = y;
      }
      window.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: reduce ? 'auto' : 'smooth' });
      });
    })();

    /* Zamrażanie istniejącej strzałki z nagłówka */
    (function(){
      const header = document.querySelector('header');
      const back   = document.querySelector('header .back');
      if (!header || !back) return;
      const io = new IntersectionObserver(([entry]) => {
        back.classList.toggle('stuck', !entry.isIntersecting);
      }, { threshold: 0 });
      io.observe(header);
    })();
  </script>
  <script>
(() => {
  const pre = document.getElementById('preloader');
  if (!pre) return;

  const logo = pre.querySelector('.mm');
  // włącz zapętloną animację od razu
  logo && logo.classList.add('loop');

  const MIN_SHOW = 450;   // min. czas pokazywania (ms)
  const MAX_WAIT = 3500;  // górny limit czekania

  function waitForImage(img){
    if (img.complete && img.naturalWidth > 0){
      return img.decode ? img.decode().catch(()=>{}) : Promise.resolve();
    }
    return new Promise(res => {
      img.addEventListener('load', async () => {
        if (img.decode){ try { await img.decode(); } catch(e){} }
        res();
      }, { once:true });
      img.addEventListener('error', res, { once:true });
    });
  }

  (async function init(){
    const start = performance.now();

    // czekamy na „krytyczne” obrazki + fonty (jak w Twojej wersji)
    const critical = Array.from(
      document.querySelectorAll('img.critical, img[loading="eager"][fetchpriority="high"]')
    );
    const fontsReady = (document.fonts && document.fonts.ready) ? document.fonts.ready : Promise.resolve();
    const imgsReady  = Promise.allSettled(critical.map(waitForImage));

    await Promise.race([
      Promise.all([fontsReady, imgsReady]),
      new Promise(r => setTimeout(r, MAX_WAIT))
    ]);

    const elapsed = performance.now() - start;
    const wait = Math.max(0, MIN_SHOW - elapsed);

    setTimeout(() => {
      // 1) zatrzymaj pętlę i „dorysuj” do wypełnionego stanu
      if (logo){
        logo.classList.remove('loop');
        logo.classList.add('finalize');
      }
      // 2) po krótkim domalowaniu – wygaszamy preloader
      setTimeout(() => {
        pre.classList.add('hidden');
        pre.addEventListener('transitionend', () => pre.remove(), { once:true });
      }, 380); // dopasowane do .finalize (.35s)
    }, wait);
  })();
})();
</script>
  <script>
(() => {

  // Po załadowaniu fontów, żeby szerokość była poprawna
  (document.fonts && document.fonts.ready ? document.fonts.ready : Promise.resolve())
    .then(normalizeCreditsSpeed);

  // Aktualizuj przy zmianie rozmiaru
  window.addEventListener('resize', normalizeCreditsSpeed);
})();
</script>
  <script>
(() => {
  // bez animacji – nic nie rób
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

  const PX_PER_SEC = 80;   // docelowa prędkość (px/s)
  const MIN_SEC    = 12;   // minimalny czas cyklu, żeby nie było zbyt szybko

  function buildCredits(c){
    const track = c.querySelector('.credits-track');
    if(!track) return;

    // zapamiętaj bazowy element (pierwszą linię) raz
    if(!track.dataset.base){
      const first = track.querySelector('.credits-line');
      if(!first) return;
      track.dataset.base = first.outerHTML;
    }
    const base = track.dataset.base;

    // odbuduj tor od zera
    track.innerHTML = '';

    // tyle chcemy mieć łącznie: > 2× szerokość kontenera, żeby 0→-50% było bezszwowe
    const target = c.clientWidth * 2.2;

    let guard = 0;
    do{
      track.insertAdjacentHTML('beforeend', base);
      guard++;
      if(guard > 30) break;        // bezpiecznik
    } while (track.scrollWidth < target);

    // upewnij się, że liczba segmentów jest PARZYSTA (połówki identyczne)
    if (track.children.length % 2 !== 0) {
      track.insertAdjacentHTML('beforeend', base);
    }

    // przelicz prędkość: dystans pętli to połowa toru
    const distance = track.scrollWidth / 2;          // px
    const duration = Math.max(MIN_SEC, distance / PX_PER_SEC); // s
    track.style.setProperty('--speed', `${duration}s`);
  }

  function init(){
    document.querySelectorAll('.credits').forEach(buildCredits);
  }

  // po załadowaniu fontów (żeby pomiary szerokości były prawidłowe)
  (document.fonts && document.fonts.ready ? document.fonts.ready : Promise.resolve())
    .then(init);

  // przy zmianie rozmiaru – odbuduj z zapamiętanego "base"
  window.addEventListener('resize', () => {
    document.querySelectorAll('.credits').forEach(buildCredits);
  });
})();
</script>
</body>
</html>
