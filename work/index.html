<!doctype html>
<html lang="pl">
<head>
  <link rel="canonical" href="https://malepszym.github.io/">
  <meta name="description" content="Martyna Malepszy — styling, co-creative direction, production.">

  <meta property="og:type" content="website">
  <meta property="og:title" content="malepszym — portfolio">
  <meta property="og:description" content="Styling, co-creative direction, production.">
  <meta property="og:url" content="https://malepszym.github.io/">
  <meta property="og:image" content="https://malepszym.github.io/assets/og-home.jpg">

  <meta name="twitter:card" content="summary_large_image">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <meta name="theme-color" content="#eeeeee">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Work — malepszym</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#eee; --fg:#111; --muted:#bfbfbf;
      --maxw:1200px; --gap:28px;
      --underline:3px; --offset:6px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font-family:Inter,system-ui,Arial,sans-serif;
      min-height:100vh; display:flex; flex-direction:column; line-height:1.6;
    }
    .container{max-width:var(--maxw); margin:0 auto; padding:clamp(16px,3vw,32px); width:100%}

    /* top bar */
    .top{display:flex; align-items:center; justify-content:space-between}
    .back{display:inline-flex; align-items:center; gap:12px; text-decoration:none; color:inherit;
      font-family:"Archivo Black",system-ui,sans-serif; font-size:22px}
    .arrow{font-size:28px; line-height:1; transform:translateY(-1px)}
    .section-label{color:var(--muted); font-weight:700; text-transform:lowercase}

    /* STUCK VARIANT: ta sama strzałka przypięta */
    .back.stuck{
  position: fixed;
  /* lewa krawędź kontenera + jego padding */
  left: calc( max((100vw - var(--maxw)) / 2, 0px) + clamp(16px, 3vw, 32px) );
  /* ta sama wysokość co header (padding kontenera) */
  top:  clamp(16px, 3vw, 32px);
  z-index: 55; /* jeśli chcesz mieć nad lightboxem */
  display: grid; place-items: center;
  width: 44px; height: 44px;
  background: var(--bg); color: var(--fg);
  border: 1px solid #e5e5e5; border-radius: 10px;
  box-shadow: 0 8px 16px rgba(0,0,0,.08);
  padding: 0; gap: 0;
}

/* ukrycie napisu przy „stuck” zostaw bez zmian */
.back.stuck span:nth-of-type(2){
  position:absolute !important; width:1px; height:1px; overflow:hidden; white-space:nowrap;
  clip:rect(0 0 0 0); clip-path:inset(50%);
}
.back.stuck .arrow{ font-size:24px; transform:none }
    /* ukryj wizualnie napis "malepszym" gdy stuck (A11y zostaje) */
    .back.stuck span:nth-of-type(2){
      position:absolute !important; width:1px; height:1px; overflow:hidden; white-space:nowrap;
      clip:rect(0 0 0 0); clip-path:inset(50%);
    }
    .back.stuck .arrow{ font-size:24px; transform:none }
    @media (max-width:700px){
      .back.stuck{ width:40px; height:40px }
      .back.stuck .arrow{ font-size:22px }
    }

    /* page title */
    .page-title{
      font-family:"Archivo Black",system-ui,sans-serif;
      text-align:center; font-size:clamp(44px,10vw,120px);
      line-height:1.05; margin:clamp(24px,6vh,48px) 0;
      letter-spacing:1px;
    }

    /* gallery */
    .gallery{
      display:grid; gap:var(--gap);
      grid-template-columns:repeat(3,1fr);
      align-items:stretch;
    }

    /* clickable tiles (no default button chrome) */
    .frame{
      appearance:none; -webkit-appearance:none;
      border:0; padding:0; margin:0;
      background:transparent; line-height:0; cursor:pointer; display:block;
    }
    .frame img{
      display:block; width:100%; height:100%; object-fit:cover;
      transition:filter .25s ease;
    }
    .frame:hover img{ filter:grayscale(100%) contrast(.95) brightness(.98) }
    .frame:focus-visible{ outline:3px solid #000; outline-offset:6px; border-radius:6px }

    /* meta pod galerią */
    .project-meta{ text-align:center; margin:clamp(24px,6vh,48px) 0 }
    .project-title{
      font-family:"Archivo Black",system-ui,sans-serif;
      font-size:clamp(36px,6.5vw,72px); line-height:1.08; margin:0 0 6px;
    }
    .project-roles{
      font-family:"Archivo Black",system-ui,sans-serif;
      font-size:clamp(18px,3vw,28px); margin:0;
    }

    /* underline dla linków w tytułach */
    .link-underline{ position:relative; text-decoration:none; color:inherit }
    .link-underline::after{
      content:""; position:absolute; left:0; bottom:calc(var(--offset)*-1);
      height:var(--underline); width:0; background:currentColor; transition:width .25s ease;
    }
    .link-underline:hover::after{ width:100% }

    /* odstęp między projektami */
    .project-block{ margin-top: clamp(40px, 10vh, 80px); }

    /* responsywny YouTube 16:9 */
    .video-wrap{
      position:relative; width:100%; aspect-ratio:16/9;
      background:#000; border-radius:8px; overflow:hidden;
    }
    .video-wrap iframe{
      position:absolute; inset:0; width:100%; height:100%; border:0;
    }

    /* RWD */
    @media (max-width:1000px){ .gallery{ grid-template-columns:repeat(2,1fr) } }
    @media (max-width:640px){ .gallery{ grid-template-columns:1fr } }

    /* LIGHTBOX (modal) */
    .lightbox{
      position:fixed; inset:0; z-index:50;
      display:none; align-items:center; justify-content:center; gap:8px;
      background:rgba(0,0,0,.75); padding:24px;
    }
    .lightbox.open{ display:flex }
    .lb-track{
      position:relative; width:min(1200px, 96vw); height:min(86vh, 900px);
      overflow-x:auto; scroll-snap-type:x mandatory; display:flex; gap:0; background:#111;
    }
    .lb-track img{
      flex:0 0 100%; height:100%; object-fit:contain; scroll-snap-align:center; background:#111;
    }
    .lb-btn{
      appearance:none; border:0; background:rgba(255,255,255,.85); color:#111;
      width:42px; height:42px; border-radius:999px; font-size:24px; line-height:1;
      display:inline-grid; place-items:center; cursor:pointer;
    }
    .lb-btn:hover{ background:#fff }
    .lb-close{ position:absolute; top:16px; right:16px }
    .lb-prev, .lb-next{ align-self:center }
    .lb-prev{ order:-1 } .lb-next{ order:2 }
    .no-scroll{ overflow:hidden }

    /* ===== Scroll reveal ===== */
    .reveal{
      opacity:0;
      transform:translateY(16px);
      transition:opacity .6s ease, transform .6s ease;
      will-change: opacity, transform;
    }
    .reveal.in{ opacity:1; transform:none }

    .from-left  { transform:translateX(-24px) }
    .from-right { transform:translateX( 24px) }
    .from-bottom{ transform:translateY( 16px) }

    .reveal.in.from-left,
    .reveal.in.from-right,
    .reveal.in.from-bottom{ transform:none }

    .delay-1{ transition-delay:.10s }
    .delay-2{ transition-delay:.22s }
    .delay-3{ transition-delay:.34s }
    .delay-4{ transition-delay:.46s }

    @media (prefers-reduced-motion:reduce){
      .reveal{ opacity:1; transform:none; transition:none }
    }

    /* footer */
    footer{ margin-top:auto; border-top:1px solid #e5e5e5 }
    footer .container{ color:#9aa0a6; font-size:14px }

    /* --- MOBILE LIGHTBOX FIX (tylko /work) --- */
    @media (max-width: 768px){
      .lightbox{ padding: 8px !important; }
      .lb-btn{ width:36px; height:36px; font-size:20px }
      .lb-close{ top:8px; right:8px }
      .lightbox .lb-track{
        width: 100vw;
        height: 70vh !important;
        height: 70svh !important;
        height: 70dvh !important;
      }
      .lightbox .lb-track img{ width:100%; height:100%; object-fit:contain; }
    }
    @media (max-width: 380px){
      .lightbox .lb-track{
        height: 66vh !important;
        height: 66svh !important;
        height: 66dvh !important;
      }
    }

    /* Back to top */
    .to-top{
      position: fixed;
      right: clamp(12px, 3vw, 24px);
      bottom: clamp(12px, 3vw, 24px);
      width: 48px; height: 48px;
      border: 0; border-radius: 999px;
      display: grid; place-items: center;
      background: var(--fg); color: var(--bg);
      font-family: "Archivo Black", system-ui, sans-serif;
      font-size: 22px; line-height: 1;
      box-shadow: 0 8px 18px rgba(0,0,0,.15);
      opacity: 0; transform: translateY(12px);
      pointer-events: none;
      transition: opacity .25s ease, transform .25s ease;
      z-index: 45; /* lightbox ma 50 */
    }
    .to-top.show{ opacity: 1; transform: none; pointer-events: auto; }
    .to-top:hover{ filter: brightness(1.05); }
    .to-top:focus-visible{ outline: 3px solid #000; outline-offset: 3px; }
    @media (max-width: 640px){ .to-top{ width: 56px; height: 56px; font-size: 24px; } }

    /* overlay "see more" na kafelkach */
    .frame{ position: relative; overflow: hidden; }
    .see-more{
      position: absolute; inset: 0; display: grid; place-items: center;
      color: #fff; font-family: "Archivo Black", system-ui, sans-serif;
      font-size: clamp(16px, 2.2vw, 22px); letter-spacing: .5px;
      text-transform: lowercase;
      opacity: 0; transition: opacity .25s ease; pointer-events: none;
    }
    .see-more::before{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.28); }
    .see-more span{ position: relative; z-index: 1; }
    .frame.has-more:hover .see-more,
    .frame.has-more:focus-visible .see-more{ opacity: 1; }

    /* Pasek miniaturek w lightboxie */
    .lb-thumbs{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:16px;
      display:flex; gap:10px; padding:8px 10px;
      background:rgba(0,0,0,.35); border-radius:10px;
      max-width:96vw; overflow-x:auto; z-index:2;
      -webkit-overflow-scrolling: touch;
    }
    .lb-thumb{
      appearance:none; border:0; padding:0; margin:0; cursor:pointer;
      width:clamp(44px, 6vw, 72px); height:clamp(44px, 6vw, 72px);
      border-radius:6px; overflow:hidden; opacity:.6; outline:2px solid transparent;
      flex:0 0 auto; background:#000;
    }
    .lb-thumb img{ width:100%; height:100%; object-fit:cover; display:block }
    .lb-thumb.active{ opacity:1; outline-color:#fff }
    @media (max-width: 900px){ .lb-thumbs{ display:none } }
  </style>
</head>
<body>
  <header class="container top">
    <a class="back" href="/" aria-label="Wróć na stronę główną"><span class="arrow">←</span><span>malepszym</span></a>
    <span class="section-label">work</span>
  </header>

  <main class="container">
    <h1 class="page-title reveal from-bottom">PROJECTS</h1>

    <!-- PROJECT 1 — Remains -->
    <div class="project-block">
      <div class="gallery">
        <button class="frame reveal from-left  delay-1" type="button" data-group="remains" data-index="0" aria-label="Otwórz galerię — zdjęcie 1">
          <img src="/assets/work/1.svg" alt="Remains — zdjęcie 1" loading="lazy">
        </button>
        <button class="frame reveal from-bottom delay-2" type="button" data-group="remains" data-index="1" aria-label="Otwórz galerię — zdjęcie 2">
          <img src="/assets/work/2.svg" alt="Remains — zdjęcie 2" loading="lazy">
        </button>
        <button class="frame reveal from-right delay-3" type="button" data-group="remains" data-index="2" aria-label="Otwórz galerię — zdjęcie 3">
          <img src="/assets/work/3.svg" alt="Remains — zdjęcie 3" loading="lazy">
        </button>
      </div>
      <section class="project-meta reveal from-bottom delay-4">
        <h2 class="project-title">
          <a class="link-underline" href="https://www.instagram.com/remains.official" target="_blank" rel="noopener noreferrer">Remains</a>
        </h2>
        <p class="project-roles">styling · co-creative direction</p>
      </section>
    </div>

    <!-- PROJECT 2 — kajamann.clothing -->
    <div class="project-block">
      <div class="gallery">
        <button class="frame reveal from-left  delay-1" type="button" data-group="kajamann" data-index="0" aria-label="Otwórz galerię — zdjęcie 1">
          <img src="/assets/work/4.svg" alt="kajamann.clothing — zdjęcie 1" loading="lazy">
        </button>
        <button class="frame reveal from-bottom delay-2" type="button" data-group="kajamann" data-index="1" aria-label="Otwórz galerię — zdjęcie 2">
          <img src="/assets/work/5.svg" alt="kajamann.clothing — zdjęcie 2" loading="lazy">
        </button>
        <button class="frame reveal from-right delay-3" type="button" data-group="kajamann" data-index="2" aria-label="Otwórz galerię — zdjęcie 3">
          <img src="/assets/work/6.svg" alt="kajamann.clothing — zdjęcie 3" loading="lazy">
        </button>
      </div>
      <section class="project-meta reveal from-bottom delay-4">
        <h2 class="project-title">
          <a class="link-underline" href="https://www.instagram.com/kajamann.clothing/" target="_blank" rel="noopener noreferrer">kajamann.clothing</a>
        </h2>
        <p class="project-roles">styling · creative assistant</p>
      </section>
    </div>

    <!-- PROJECT 3 — Tabusie (YouTube) -->
    <div class="project-block">
      <div class="video-wrap reveal from-bottom">
        <iframe
          src="https://www.youtube-nocookie.com/embed/v4vYYpS4b9Y?modestbranding=1&rel=0"
          title="Tabusie — video"
          loading="lazy"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen></iframe>
      </div>
      <section class="project-meta reveal from-bottom delay-2">
        <h2 class="project-title">
          <a class="link-underline" href="http://tabou.pl/tabusie" target="_blank" rel="noopener noreferrer">Tabusie</a>
        </h2>
        <p class="project-roles">project coordinator · production assistant</p>
      </section>
    </div>
  </main>

  <!-- MODAL GALLERY -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Galeria">
    <button class="lb-btn lb-prev"  aria-label="Poprzednie">‹</button>
    <div class="lb-track" id="lbTrack" tabindex="0"></div>
    <div class="lb-thumbs" id="lbThumbs" aria-label="Miniatury"></div>
    <button class="lb-btn lb-next"  aria-label="Następne">›</button>
    <button class="lb-btn lb-close" id="lbClose" aria-label="Zamknij">×</button>
  </div>

  <footer>
    <div class="container">© <span id="y"></span> malepszym</div>
  </footer>

  <script>
    // Rok w stopce
    document.getElementById('y').textContent = new Date().getFullYear();

    // Zestawy obrazów dla lightboxa
    const IMAGES = {
      remains: [
        '/assets/work/1.svg','/assets/work/2.svg','/assets/work/3.svg',
        '/assets/work/r4.svg','/assets/work/r5.svg','/assets/work/r6.svg','/assets/work/r7.svg'
      ],
      kajamann: [
        '/assets/work/4.svg','/assets/work/5.svg','/assets/work/6.svg',
        '/assets/work/km4.svg','/assets/work/km5.svg','/assets/work/km6.svg','/assets/work/km7.svg'
      ]
    };

    /* ===== Scroll reveal ===== */
    (function(){
      const els = document.querySelectorAll('.reveal');
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduce){ els.forEach(el => el.classList.add('in')); return; }
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){ entry.target.classList.add('in'); io.unobserve(entry.target); }
        });
      }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });
      els.forEach(el => io.observe(el));
    })();

    /* ===== Lightbox ===== */
    const overlay = document.getElementById('lightbox');
    const track   = document.getElementById('lbTrack');
    const btnPrev = document.querySelector('.lb-prev');
    const btnNext = document.querySelector('.lb-next');
    const btnClose= document.getElementById('lbClose');
    const thumbs  = document.getElementById('lbThumbs');

    let group = null;
    let index = 0;

    function renderTrack(list){
      track.innerHTML = '';
      if (thumbs) thumbs.innerHTML = '';

      list.forEach((src,i)=>{
        const img = document.createElement('img');
        img.src = src; img.alt = `Zdjęcie ${i+1}`;
        track.appendChild(img);

        if (thumbs){
          const th = document.createElement('button');
          th.className = 'lb-thumb';
          th.setAttribute('aria-label', `Pokaż zdjęcie ${i+1}`);
          const timg = document.createElement('img');
          timg.src = src; timg.alt = '';
          th.appendChild(timg);
          th.addEventListener('click', ()=> jumpTo(i));
          thumbs.appendChild(th);
        }
      });
    }

    function updateThumbsActive(){
      if (!thumbs) return;
      const items = thumbs.querySelectorAll('.lb-thumb');
      items.forEach((el, i)=> el.classList.toggle('active', i === index));
      const active = items[index];
      if (active){
        const center = active.offsetLeft - (thumbs.clientWidth/2 - active.clientWidth/2);
        thumbs.scrollTo({ left: Math.max(0, center), behavior: 'smooth' });
      }
    }

    function jumpTo(i){
      index = i;
      const w = track.clientWidth;
      track.scrollTo({ left: w * index, behavior: 'smooth' });
      updateThumbsActive();
    }

    function openLightbox(g, i=0){
      group = g; index = i;
      renderTrack(IMAGES[group]);
      overlay.classList.add('open');
      document.body.classList.add('no-scroll');
      requestAnimationFrame(()=>{
        const w = track.clientWidth;
        track.scrollTo({ left: w * index, behavior: 'instant' });
        track.focus({ preventScroll: true });
        updateThumbsActive();
      });
    }
    function closeLightbox(){
      overlay.classList.remove('open');
      document.body.classList.remove('no-scroll');
      group = null;
    }
    function go(delta){
      if(!group) return;
      const count = IMAGES[group].length;
      index = (index + delta + count) % count;
      const w = track.clientWidth;
      track.scrollTo({ left: w * index, behavior: 'smooth' });
      updateThumbsActive();
    }

    // Miniatury + overlay "see more"
    document.querySelectorAll('.frame').forEach(btn=>{
      const g = btn.dataset.group;
      const needsMore = IMAGES[g] && IMAGES[g].length > 3;

      if (needsMore) {
        btn.classList.add('has-more');
        if (!btn.querySelector('.see-more')) {
          const o = document.createElement('span');
          o.className = 'see-more';
          o.setAttribute('aria-hidden','true');
          const inner = document.createElement('span');
          inner.textContent = 'see more';
          o.appendChild(inner);
          btn.appendChild(o);
        }
      }

      btn.addEventListener('click', ()=>{
        const i = parseInt(btn.dataset.index,10) || 0;
        openLightbox(g, i);
      });
    });

    // Sterowanie lightbox
    btnPrev.addEventListener('click', ()=>go(-1));
    btnNext.addEventListener('click', ()=>go(1));
    btnClose.addEventListener('click', closeLightbox);

    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeLightbox(); });
    window.addEventListener('keydown', (e)=>{
      if(!overlay.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowRight') go(1);
      if(e.key === 'ArrowLeft')  go(-1);
    });

    // Aktualizacja indexu przy ręcznym scrollu
    let timer;
    track.addEventListener('scroll', ()=>{
      clearTimeout(timer);
      timer = setTimeout(()=>{
        const w = track.clientWidth;
        index = Math.round(track.scrollLeft / w);
        updateThumbsActive();
      }, 80);
    });
  </script>

  <!-- Back to top -->
  <button id="toTop" class="to-top" aria-label="Back to top" title="Back to top">↑</button>
  <script>
    (() => {
      const btn = document.getElementById('toTop');
      if (!btn) return;

      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      let lastY = window.scrollY;

      function onScroll(){
        const y = window.scrollY;
        const downFar = y > 600;
        const scrollingUp = y < lastY - 10;
        btn.classList.toggle('show', downFar || scrollingUp);
        lastY = y;
      }

      window.addEventListener('scroll', onScroll, { passive: true });
      onScroll();

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: reduce ? 'auto' : 'smooth' });
      });
    })();
  </script>

  <!-- Zamrażanie istniejącej strzałki z nagłówka -->
  <script>
    (() => {
      const header = document.querySelector('header');
      const back   = document.querySelector('header .back');
      if (!header || !back) return;

      const io = new IntersectionObserver(([entry]) => {
        back.classList.toggle('stuck', !entry.isIntersecting);
      }, { threshold: 0 });
      io.observe(header);
    })();
  </script>
</body>
</html>
